"use strict";(self.webpackChunk_1_relation_documentation=self.webpackChunk_1_relation_documentation||[]).push([[2307],{4224:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"misc/conditionals","title":"Conditionals","description":"A guide to using conditions for logic and automation in FlowAgent.","source":"@site/docs/misc/conditionals.md","sourceDirName":"misc","slug":"/misc/conditionals","permalink":"/docs/misc/conditionals","draft":false,"unlisted":false,"editUrl":"https://github.com/flowagentnu/1rel-documentation/tree/main/docs/misc/conditionals.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Replaceables","permalink":"/docs/misc/replaceables"},"next":{"title":"Custom Login Screen","permalink":"/docs/misc/custom-login-screen"}}');var o=i(4848),r=i(8453);const t={},l="Conditionals",c={},d=[{value:"Purpose",id:"purpose",level:2},{value:"Where Conditionals Are Used",id:"where-conditionals-are-used",level:2},{value:"JSON Structure",id:"json-structure",level:2},{value:"Advanced: Using conditionType and conditionVar",id:"advanced-using-conditiontype-and-conditionvar",level:2},{value:"Supported Conditions",id:"supported-conditions",level:2},{value:"JSON Usage Examples",id:"json-usage-examples",level:2},{value:"Example: Check if a list is empty, then clear a field on each item",id:"example-check-if-a-list-is-empty-then-clear-a-field-on-each-item",level:3},{value:"Example: Only show button if user is in group \u201cadmin\u201d",id:"example-only-show-button-if-user-is-in-group-admin",level:3},{value:"Example: Make a form visible only when the status is not &quot;closed&quot;",id:"example-make-a-form-visible-only-when-the-status-is-not-closed",level:3},{value:"Example: Only show button if query returns more than 3 results",id:"example-only-show-button-if-query-returns-more-than-3-results",level:3},{value:"Notes",id:"notes",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"conditionals",children:"Conditionals"})}),"\n",(0,o.jsx)(n.p,{children:"A guide to using conditions for logic and automation in FlowAgent."}),"\n",(0,o.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,o.jsx)(n.p,{children:"Conditions are used to evaluate logic throughout the Flow platform. They support a wide range of comparison types and are commonly used in rules, logic flows, widgets, and automations."}),"\n",(0,o.jsxs)(n.p,{children:["This helper allows you to define ",(0,o.jsx)(n.strong,{children:"conditions"})," using simple syntax and run logic only when those conditions are true."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"where-conditionals-are-used",children:"Where Conditionals Are Used"}),"\n",(0,o.jsx)(n.p,{children:"Conditionals are widely used across the Flow platform to control visibility and behavior dynamically:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Forms"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Visibility"}),": Show or hide a form based on specific conditions (e.g., user role, item status)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Triggers"}),": Execute logic (e.g., autofill, CRUD operations) when certain conditions are met."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Action Buttons"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Visibility"}),": Show or hide buttons depending on user context, field values, or item state."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Triggers"}),": Perform actions like sending emails, updating fields, or showing forms when conditions are met."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["These conditionals are defined using the same JSON format and evaluated by the ",(0,o.jsx)(n.code,{children:"ConditionalHelper"}),"."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"json-structure",children:"JSON Structure"}),"\n",(0,o.jsx)(n.p,{children:"A typical conditional block looks like this:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "if": [\n    [\n      "field_name",\n      "is",\n      "empty"\n    ]\n  ],\n  "then": {\n    "doSomething": true\n  },\n  "breakAfter": false\n}\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"if"}),": An array of condition arrays. Each condition is structured as ",(0,o.jsx)(n.code,{children:"[leftOperand, condition, rightOperand]"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"then"}),": The action(s) to perform if the condition(s) are true."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"breakAfter"}),": (Optional) Whether to stop processing further rules if this one is matched."]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"advanced-using-conditiontype-and-conditionvar",children:"Advanced: Using conditionType and conditionVar"}),"\n",(0,o.jsxs)(n.p,{children:["You can use ",(0,o.jsx)(n.code,{children:"conditionType"})," to perform advanced checks on the results of a query or count:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"conditionType"}),": Controls how the condition is evaluated. Supported values:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"has_results"}),": True if the query returns any results."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"no_results"}),": True if the query returns no results."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"count_equal"}),": True if the query result count equals ",(0,o.jsx)(n.code,{children:"conditionVar"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"count_not_equal"}),": True if the query result count does not equal ",(0,o.jsx)(n.code,{children:"conditionVar"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"count_greater"}),": True if the query result count is greater than ",(0,o.jsx)(n.code,{children:"conditionVar"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"count_less"}),": True if the query result count is less than ",(0,o.jsx)(n.code,{children:"conditionVar"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"conditionVar"}),": (Required for count_* types) The number to match against the query result count."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example: Only show a button if a user has exactly 2 active items:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "if": [\n    ["status", "=", "active"],\n    ["user_id", "=", "[user]"]\n  ],\n  "conditionType": "count_equal",\n  "conditionVar": 2,\n  "then": {\n    "visible": true\n  }\n}\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"supported-conditions",children:"Supported Conditions"}),"\n",(0,o.jsx)(n.p,{children:"You can use the following condition keywords:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"is"})," or ",(0,o.jsx)(n.code,{children:"="}),": Equals (e.g., ",(0,o.jsx)(n.code,{children:'["status", "is", "done"]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"!="})," or ",(0,o.jsx)(n.code,{children:"<>"}),": Not equal (e.g., ",(0,o.jsx)(n.code,{children:'["type", "!=", "archived"]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:">"}),": Greater than (e.g., ",(0,o.jsx)(n.code,{children:'["age", ">", 18]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:">="}),": Greater or equal (e.g., ",(0,o.jsx)(n.code,{children:'["score", ">=", 10]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"<"}),": Less than (e.g., ",(0,o.jsx)(n.code,{children:'["quantity", "<", 5]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"<="}),": Less or equal (e.g., ",(0,o.jsx)(n.code,{children:'["price", "<=", 100]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"contains"}),": String contains (e.g., ",(0,o.jsx)(n.code,{children:'["description", "contains", "urgent"]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"notcontains"}),": String does not contain (e.g., ",(0,o.jsx)(n.code,{children:'["title", "notcontains", "test"]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"startswith"}),": String starts with (e.g., ",(0,o.jsx)(n.code,{children:'["filename", "startswith", "img_"]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"endswith"}),": String ends with (e.g., ",(0,o.jsx)(n.code,{children:'["filename", "endswith", ".jpg"]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"in"}),": Value is in list (e.g., ",(0,o.jsx)(n.code,{children:'["color", "in", "red,green,blue"]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"notin"}),": Value is not in list (e.g., ",(0,o.jsx)(n.code,{children:'["status", "notin", "cancelled,draft"]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"empty"}),": Value is empty or null (e.g., ",(0,o.jsx)(n.code,{children:'["comment", "is", "empty"]'}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"notempty"}),": Value is not empty (e.g., ",(0,o.jsx)(n.code,{children:'["name", "is", "notempty"]'}),")"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"json-usage-examples",children:"JSON Usage Examples"}),"\n",(0,o.jsx)(n.h3,{id:"example-check-if-a-list-is-empty-then-clear-a-field-on-each-item",children:"Example: Check if a list is empty, then clear a field on each item"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "if": [\n    ["optaelling_liste", "is", "empty"]\n  ],\n  "then": {\n    "loop": "produkter",\n    "crud": {\n      "update": {\n        "[loopvalue]": {\n          "customfield": {\n            "cf1434": ""\n          }\n        }\n      }\n    }\n  },\n  "breakAfter": false\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"example-only-show-button-if-user-is-in-group-admin",children:"Example: Only show button if user is in group \u201cadmin\u201d"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "if": [\n    ["[usergroups]", "contains", "admin"]\n  ],\n  "then": {\n    "visible": true\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"example-make-a-form-visible-only-when-the-status-is-not-closed",children:'Example: Make a form visible only when the status is not "closed"'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "if": [\n    ["[item.cf1001]", "!=", "closed"]\n  ],\n  "then": {\n    "visible": true\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"example-only-show-button-if-query-returns-more-than-3-results",children:"Example: Only show button if query returns more than 3 results"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "if": [\n    ["status", "=", "active"]\n  ],\n  "conditionType": "count_greater",\n  "conditionVar": 3,\n  "then": {\n    "visible": true\n  }\n}\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Most values can be dynamic, using ",(0,o.jsx)(n.a,{href:"/docs/misc/replaceables",children:"Replaceables"})," like ",(0,o.jsx)(n.code,{children:"[user]"}),", ",(0,o.jsx)(n.code,{children:"[item.cf1234]"}),", etc."]}),"\n",(0,o.jsx)(n.li,{children:"String comparisons are case-insensitive by default."}),"\n",(0,o.jsxs)(n.li,{children:["Arrays and comma-separated values are supported for ",(0,o.jsx)(n.code,{children:"in"})," and ",(0,o.jsx)(n.code,{children:"contains"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["For more info on how JSON queries work, see ",(0,o.jsx)(n.a,{href:"/docs/JSON/json-query",children:"JSON Queries"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>l});var s=i(6540);const o={},r=s.createContext(o);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);